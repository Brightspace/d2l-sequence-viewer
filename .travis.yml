language: node_js
node_js: 10
addons:
  chrome: stable
sudo: required
branches:
  only:
  - master
  - /^v.*$/
after_success:
- '[ "$TRAVIS_PULL_REQUEST" = "false" ] && [ "$TRAVIS_BRANCH" == "master" ] || [ "x$TRAVIS_TAG" != "x" ] && export NODE_ENV=production && npm run publish:dev:cdn'
script:
- npm run lint
- npm run build
- npm run test-sauce
before_install:
- echo -e "machine github.com\n  login $GITHUB_RELEASE_TOKEN" >> ~/.netrc
env:
  global:
  - REPO_NAME=d2l-sequence-viewer
  - secure: QZCFlbxTSDnR7M1Td7PG7Fwayz4+8B9MSwP84v2IR/Pwz7xIXczal+Qm6VBf2UijAqSgECNeYQOy5TtDJUjzJ66TZgVWiXLNO+Y0+A9PGwaAHP8JEA1P1X1es/k1m3Ev60HIpSiUMwa3bY2liGUNG+1S+uk6SoWXkpICQRHiGz62hRr8KwXfRpyPKXxqtI5zm2WGp5YAUUmS8UnZrCzTJvVTH0f3rYN2P8Efw1JtMkN1hFx2X9H2CltYfmJjteuaX/aw+G+ThmpFWFoHeNAid+kSH6Ix1kIx0lKXWQ8aB7gCWyC8sN9WB7c+ZpTyu6/r6vbpbyc77lV/V7RjFkUuL0uNI9SRi3OA+Rk510engGMrNISii6nbve1FHEEbXA/1cURCc7xgPK7E1Gj8IKgnYO7SBCD37iLc2d5+bpjw5x1PJpyJON0FcwWics3c3kZ/agYOs4kw8QhXgcBSzS8cSSIFJQcca+A3WxlLNfXbqY1Hf4dmWzHrGxS6/72tPuplr1v3sIKOT/L77vMMezqTHABDKJUYsZMYJwR4+jZdScWvUe8q2Uht2NSNZSPMJb+MPwgsMji8Oxlahaw2AkWmSwe4nvDSQT1CG/TC6KZ2K6W5MteMblTolHs0GvwsPq98YtPdMeowDpHjv5gXf5z3rmsu2plJsSv/ZRqT/mV4Zvc=
# CDN_SECRET
  - secure: k46HJXxE3Uw57l+QSDguxcrP5ryr+w/WUSKV4vuo5CTQXiSFcjnPXgWSYBM4eFbYgf5pmkR3VCFsSLSJNFU0np5eQrFuHX8vdpdo4kaiFVA54kGaMWeLOTxfCAJQD7ePo6UHmkVQliB39MT0D4toMiiJUOW78rrJImiIjwwLsrVB3PynY+x/N6jYkeZPGf3Fhs69ssY13dEoVOajZXO9mJqbPoA4VmmRII8QeCUsWI6zZ9XuiSjbCNODzW4WjAE/kdpCrdUC1Fl03HYgGFMI0wolvTiazjijHHaOi391kjpsWlNoBdDPzex3WZq7UNRMxeREITeSMy9P9Vz2TBxF1u2T/O2f9s2KStT+LLXmHN/yXgWUsVdoElii4flI/WTP4R3vWJMyFBRAa/6GsdwA1dGGU1dThWaVM4AE5nVI3M7V1HyTOSePIOT2XUwkTw8U2cUQ/chsSz1VDdTfxTM4Jgo5DVZWGN7pqq7lQWrY+z4qIWd9IYEDFnY54nXqC60TKSTUtq0XG5wOJwwGCbGIWDy4MK3Est3bX2prWMUr1lt60XC6vo2GQ0iM9ynggS7LHpOx/Oe9rJPxcej4BrEZ5aVa4RpUA9/H0kwMruGI1moObiw6I9PwIYdonhj2DMnC5L6OQEp5FtmQwuHG/4tr+ad15ZyvsJArLCFUQW8dsnE=
# SAUCE_USERNAME = team_mango  
  - secure: JxUxcXaJrdEkhFnCxdcWF8pgzpj++y2tol+8M5cjCj1d1Haic0jBVWI3wj3MVg9i130K3P5ewxcuR/MpHPEK9ArVdTHEvXiFmn7MgZupJPR6FaH9ZGit+aGzEoRcc5Pe98HHr4wp6gVrFyZFkecAlM26DuBATC/jINi2qfZ0uA/YJ03T2QVFRbw5w+sNiwghdkRKAgHqEa9X1OwiiiBRHbRIDQM5gSspEHygEENLy7yH5BQpYx1vHyFWuf1GgmNIv5gJn1lqIjRQ7gmFVVsUb4pwcGSWNeHNw5an5HPqVKuO/965lgp7IPLfzyhG9sm8t3fP/lknwvrIx/bvCZsCMR7ZD9VntyQhvQYwv383Ep44xsIHZSX8mro/KvZ+ABhigih9ffYf0Z3B/yhZBi7guYYBVEOf+0MhD5G9MTrCnsHcs29FPEzjmKfQfz1PkUilvMNMYtrQh95/5dU1bGXe2n8JdCuFjz1rVJHre4WipAdbnC9x5tvQMinUZIP/w463qlHicgjxBLI8wx7PpYBAjFAbCE42fho/oASrFvnIun/ouPCLiYCFU4/lj1HN+3fswVL03MlAUqcy+Tgo/4oMDb50Exjm9RHRaE1YwBkA3twshrhfzfdag4o1RUpMotZVK5VDnLn07QLHd3OZoumA0qvyl5qCE9oRmo4DtJ7gu0A=
# SAUCE_ACCESS_KEY  
  - secure: til+tGcScpM3Im09vgbEzbD5cP3GDNXJYwRYHKM8XvO8mb4Nwt+PwNkTBOJBdmBEx/JMHm+w4UPpBnMYuubpVdiKoCeSygN+Y1SPFE2Y2aqfnnYY7EGpgUFdnHMSW9s5Sfdke7vNJBfZfibyHqjAN4o4uuLEjTA0RxJTRAJQiAi5T8KcNrIqiJl/h0UDi4HrYMVl0m0Ywzgb+phDml7Lq0Xly3s9H1Yv4UlcHlyxGzL/sS3r/0s4RNvjRnb3UoWsKcf6t3flskBTNdpmS1Z1rhGHFZtkwWkcpnXTQUlmcT7WEAQDwmqfXWtngSaPCGwCkl2LkBJOeagjH1oyXFrnXdUmWrocxSmBY1YAMFn5vd03pGEm1Nw4uTJs2+08zYmfXgIs1IztT9xdt9aADRaYAPXRgQjis1b553yCkwwATjsuAdC43FdChk3Xkr+WqZvoqRGINRvhRiN34zV0dqZNZVo5G+WlsXYJ9J30SzIUzsZBOEcF4Z5Z/vlraItz3T3zKoEn+EN/rgyZbujNsv0fOk3JaQJtRRfWAW2iT/nuEJRLGXSByOKLgV5uF/tA2YrYI3zG48NmmJnOc9Fr7DmvJlbnXlBZBUDpVuEmyD12S1vlT/hoAO064KVa46F+WnIpV3wSGWR1XmemXVmPKPfC3C5jahmNOxLcqw0iT0jAdWw=